  - platform: template
    sensors:

      lgac_03_oper:
        friendly_name: 훈이방에어컨 가동
        unique_id: lgac_03_oper
        device_class: power
        icon_template: >-
          {% if has_value("sensor.lgac_03_state") and states("sensor.lgac_03_state")[12:14] is defined %}
            {% set data = states("sensor.lgac_03_state")[12:14] | int(base=16) | bitwise_and(7) %}
            {% if data == 0 %} mdi:snowflake
            {% elif data == 1 %} mdi:water-percent
            {% elif data == 2 %} mdi:fan
            {% elif data == 3 %} mdi:rotate-3d-variant
            {% elif data == 4 %} mdi:fire
            {% else %} mdi:sync-alert
            {% endif %}
          {% else %} mdi:sync-alert
          {% endif %}
        value_template: >-
          {% if has_value("sensor.lgac_03_state") and states("sensor.lgac_03_state")[2:4] is defined %}
            {% set data = states("sensor.lgac_03_state")[2:4] | int(base=16) %}
            {% if data == 3 or data == 7 %} on
            {% elif data == 2 or data == 6 %} off
            {% else %} {{ states("binary_sensor.lgac_03_oper") }}
            {% endif %}
          {% else %} {{ states("binary_sensor.lgac_03_oper") }}
          {% endif %}
        attribute_templates:
          oper: '{{ states("binary_sensor.lgac_03_oper") }}'
          curr_temperature: '{{ states("sensor.lgac_03_temperature") }}°C'
          set_temperature: '{{ states("sensor.lgac_03_set_temperature") }}°C'
          mode: '{{ states("sensor.lgac_03_hvac_mode") }}'
          speed: '{{ states("sensor.lgac_03_fan_mode") }}'
          swing: '{{ states("sensor.lgac_03_swing_mode") }}'
          lock: '{{ states("binary_sensor.lgac_03_lock") }}'
          outdoor_oper: '{{ states("binary_sensor.lgac_03_outdoor_oper") }}'
          outdoor_temperature: '{{ states("sensor.lgac_03_outdoor_temperature") }}°C'
          pipe2_temperature: '{{ states("sensor.lgac_03_pipe2_temperature") }}°C'
          pipe1_temperature: '{{ states("sensor.lgac_03_pipe1_temperature") }}°C'
          states: '{{ states("sensor.lgac_03_state") }}'

      lgac_03_lock:
        friendly_name: 훈이방에어컨 잠금
        unique_id: lgac_03_lock
        icon_template: >-
          {% if has_value("sensor.lgac_03_state") and states("sensor.lgac_03_state")[2:4] is defined %}
            {% set data = states("sensor.lgac_03_state")[2:4] | int(base=16) %}
            {% if data == 2 or data == 3 %} mdi:lock-open-outline
            {% elif data == 6 or data == 7 %} mdi:lock
            {% else %} mdi:sync-alert
            {% endif %}
          {% else %} mdi:sync-alert
          {% endif %}
        value_template: >-
          {% if has_value("sensor.lgac_03_state") and states("sensor.lgac_03_state")[2:4] is defined %}
            {% set data = states("sensor.lgac_03_state")[2:4] | int(base=16) %}
            {% if data == 2 or data == 3 %} off
            {% elif data == 6 or data == 7 %} on
            {% else %} {{ states("binary_sensor.lgac_03_lock") }}
            {% endif %}
          {% else %} {{ states("binary_sensor.lgac_03_lock") }}
          {% endif %}

      lgac_03_outdoor_oper:
        unique_id: lgac_03_outdoor_oper
        friendly_name: 훈이방에어컨 실외기
        device_class: power
        icon_template: >-
          {% if has_value("sensor.lgac_03_state") and states("sensor.lgac_03_state")[22:24] is defined %}
            {% if states("sensor.lgac_03_state")[22:24] | int(base=16) == 40 %} mdi:hvac-off
            {% else %} mdi:hvac
            {% endif %}
          {% else %} mdi:sync-alert
          {% endif %}
        value_template: >-
          {% if has_value("sensor.lgac_03_state") and states("sensor.lgac_03_state")[22:24] is defined %}
            {% if states("sensor.lgac_03_state")[22:24] | int(base=16) == 40 %} off
            {% else %} on
            {% endif %}
          {% else %} {{ states("binary_sensor.lgac_03_outdoor_oper") }}
          {% endif %}
